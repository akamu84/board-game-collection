(this["webpackJsonpboard-game-collection"]=this["webpackJsonpboard-game-collection"]||[]).push([[0],{100:function(e,t){},102:function(e,t){},114:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(10),c=a.n(i),o=a(14),l=a.n(o),s=a(60),m=a(13),u=a(74),f=a(163),g=a(36),p=a.n(g),b=a(148),d=a(159),E=a(145),v=a(147),h=a(160),x=Object(u.a)((function(e){return Object(f.a)({form:{marginTop:".5rem"},button:{marginTop:".5rem"}})})),y=function(e){var t=e.addOwner,a=x(),i=Object(n.useState)(""),c=Object(m.a)(i,2),o=c[0],l=c[1];return r.a.createElement("form",{className:a.form,onSubmit:function(e){e.preventDefault(),t(o.toLowerCase().trim()),l("")}},r.a.createElement(E.a,{variant:"filled",fullWidth:!0},r.a.createElement(h.a,{htmlFor:"user-input"},"Board Game Geek User"),r.a.createElement(d.a,{id:"user-input",type:"text",onChange:function(e){return l(e.target.value)},endAdornment:r.a.createElement(v.a,{position:"end"},r.a.createElement(p.a,null))})),r.a.createElement(b.a,{className:a.button,type:"submit",color:"primary",variant:"contained",fullWidth:!0},"Add"))},w=a(81),O=a(149),j=a(158),N=a(162),S=a(77),C=a.n(S),I=a(151),T=a(152),k=a(153),_=a(47),P=a.n(_),B=a(49),L=a.n(B),F=a(115),z=a(48),D=a.n(z),J=Object(u.a)((function(e){return Object(f.a)({title:{marginTop:".5rem",marginLeft:".5rem"},list:{width:"20rem",marginRight:".5rem"},listItem:{marginTop:"1.5rem"},fab:{top:"auto",right:"20px",bottom:"20px",left:"auto",position:"fixed"}})})),W=function(e){var t=e.masterCollection,a=e.setMasterCollection,n=J(),i=r.a.useState([0,20]),c=Object(m.a)(i,2),o=c[0],l=c[1],s=r.a.useState([0,10]),u=Object(m.a)(s,2),f=u[0],g=u[1],p=r.a.useState([0,240]),d=Object(m.a)(p,2),E=d[0],v=d[1],h=r.a.useState(null),x=Object(m.a)(h,2),y=x[0],S=x[1],_=function(e){return"".concat(e)},B=function(){var e=t.map((function(e){var t=240===E[1]?999:E[1],a=20===o[1]?999:o[1],n=e.stats.minPlayers>=o[0]&&e.stats.maxPlayers<=a,r=e.stats.playingTime>=E[0]&&e.stats.playingTime<=t,i=e.rating>=f[0]&&e.rating<=f[1];return e.filtered=!n||!r||!i,e}));a(e)},z=Boolean(y);return r.a.createElement("div",null,r.a.createElement(O.a,{className:n.fab,"aria-describedby":"filter-panel",color:"primary",onClick:function(e){console.log(e.currentTarget),S(e.currentTarget)}},r.a.createElement(C.a,null)),r.a.createElement(j.a,{id:"filter-panel",open:z,anchorEl:y,onClose:function(){S(null)},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"}},r.a.createElement("div",null,r.a.createElement(F.a,{className:n.title},"Filter"),r.a.createElement(I.a,{className:n.list},r.a.createElement(T.a,{className:n.listItem},r.a.createElement(k.a,null,r.a.createElement(P.a,null)),r.a.createElement(N.a,{value:o,onChange:function(e,t){l(t)},onChangeCommitted:B,valueLabelDisplay:"on","aria-labelledby":"range-slider",getAriaValueText:_,max:20})),r.a.createElement(T.a,{className:n.listItem},r.a.createElement(k.a,null,r.a.createElement(D.a,null)),r.a.createElement(N.a,{value:E,onChange:function(e,t){v(t)},onChangeCommitted:B,valueLabelDisplay:"on","aria-labelledby":"range-slider",getAriaValueText:_,max:240})),r.a.createElement(T.a,{className:n.listItem},r.a.createElement(k.a,null,r.a.createElement(L.a,null)),r.a.createElement(N.a,{value:f,onChange:function(e,t){g(t)},onChangeCommitted:B,valueLabelDisplay:"on","aria-labelledby":"range-slider",getAriaValueText:_,max:10})),r.a.createElement(T.a,{className:n.listItem},r.a.createElement(b.a,{onClick:function(){l([0,20]),g([0,10]),v([0,240]);var e=t.map((function(e){return Object(w.a)({},e,{filtered:!1})}));a(e)}},"Clear"))))))},A=a(154),G=Object(u.a)((function(e){return Object(f.a)({image:{width:128,height:128},img:{margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%"}})})),M=function(e){var t=e.image,a=G();return r.a.createElement(A.a,{item:!0},r.a.createElement("div",{className:a.image},r.a.createElement("img",{className:a.img,alt:"box art",src:t})))},R=a(155),V=Object(u.a)((function(e){return Object(f.a)({text:{display:"flex",alignItems:"center",marginTop:"1rem"},icon:{marginLeft:".5rem"}})})),q=function(e){var t=e.game,a=V();return r.a.createElement(A.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:1},r.a.createElement(A.a,{item:!0,xs:!0},r.a.createElement(F.a,{gutterBottom:!0,variant:"h6"},t.name),r.a.createElement(R.a,null),r.a.createElement(F.a,{variant:"body2",gutterBottom:!0,className:a.text},t.stats.playingTime,"m",r.a.createElement(D.a,{fontSize:"small",className:a.icon})),r.a.createElement(F.a,{variant:"body2",gutterBottom:!0,className:a.text},t.stats.minPlayers===t.stats.maxPlayers?t.stats.minPlayers:"".concat(t.stats.minPlayers,"-").concat(t.stats.maxPlayers),r.a.createElement(P.a,{fontSize:"small",className:a.icon}))))},H=Object(u.a)((function(e){return Object(f.a)({text:{display:"flex",alignItems:"center"},icon:{marginLeft:".5rem"}})})),U=function(e){var t=e.rating,a=H();return r.a.createElement(A.a,{item:!0},r.a.createElement(F.a,{variant:"subtitle1",className:a.text},1===t.toString().length?"".concat(t,".0"):t,r.a.createElement(L.a,{fontSize:"small",style:{color:"gold"},className:a.icon})))},$=a(161),K=Object(u.a)((function(e){return Object(f.a)({ownerInfo:{marginTop:".5rem"}})})),Q=function(e){var t=e.owners,a=e.removeOwner,n=K();return r.a.createElement(A.a,{item:!0,container:!0,direction:"row",spacing:1,className:n.ownerInfo},t.map((function(e){return r.a.createElement(A.a,{item:!0,key:e},a?r.a.createElement($.a,{size:"small",color:"primary",icon:r.a.createElement(p.a,null),label:e,onDelete:function(t){return a(e)}}):r.a.createElement($.a,{size:"small",color:"primary",icon:r.a.createElement(p.a,null),label:e}))})))},X=a(150),Y=Object(u.a)((function(e){return Object(f.a)({root:{flexGrow:1},paper:{padding:e.spacing(2),margin:"auto",marginBottom:".5rem",maxWidth:500}})})),Z=function(e){var t=e.game,a=Y();return r.a.createElement("div",{className:a.root},r.a.createElement(X.a,{className:a.paper,square:!0},r.a.createElement(A.a,{container:!0,spacing:2},r.a.createElement(M,{image:t.image}),r.a.createElement(A.a,{item:!0,xs:!0,container:!0},r.a.createElement(q,{game:t}),r.a.createElement(U,{rating:t.rating}))),r.a.createElement(Q,{owners:t.owners})))},ee=function(e){var t=e.collection;return r.a.createElement("div",null,t.filter((function(e){return!e.filtered})).map((function(e){return r.a.createElement(Z,{key:e.id,game:e})})))},te=a(78),ae=a.n(te);function ne(e){var t,a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(re("https://boardgamegeek.com/xmlapi/collection/".concat(e,"?own=1")));case 2:return t=n.sent,n.next=5,l.a.awrap(t.text());case 5:return a=n.sent,n.abrupt("return",ie(a,e));case 7:case"end":return n.stop()}}))}function re(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=new Response,a.prev=1,a.next=4,l.a.awrap(fetch(e));case 4:if(202!==(t=a.sent).status){a.next=11;break}return a.next=8,l.a.awrap(ce(500));case 8:return a.next=10,l.a.awrap(re(e));case 10:t=a.sent;case 11:a.next=16;break;case 13:a.prev=13,a.t0=a.catch(1),t=new Response('\n      <?xml version="1.0" encoding="utf-8" standalone="yes" ?>\n      <errors>\n        <error>\n          <message>'.concat(a.t0,"</message>\n        </error>\n      </errors>\n    "));case 16:return a.prev=16,a.abrupt("return",t);case 19:case"end":return a.stop()}}),null,null,[[1,13,16,19]])}function ie(e,t){var a=JSON.parse(ae.a.xml2json(e,{compact:!0,spaces:4,ignoreDeclaration:!0})),n={},r=[];return a.errors&&(n.hasError=!0,n.error=a.errors.error.message._text),a.items&&(n.hasError=!1,n.totalItems=a.items._attributes.totalitems,n.owner=t,r=a.items.item.map((function(e){var t={};return t.id=e._attributes.objectid,t.type=e._attributes.subtype,t.name=e.name._text,t.published=parseFloat(e.yearpublished._text),t.image=e.image._text,t.thumbnail=e.thumbnail._text,t.stats={minPlayers:parseFloat(e.stats._attributes.minplayers)||0,maxPlayers:parseFloat(e.stats._attributes.maxplayers)||99,playingTime:parseFloat(e.stats._attributes.playingtime)||0},t.rating=parseFloat(e.stats.rating.average._attributes.value)||0,t})),n.games=r),n}function ce(e){return new Promise((function(t){return setTimeout(t,e)}))}function oe(e){var t=[];return e.forEach((function(e){e.games.forEach((function(a){var n=t.findIndex((function(e){return e.id===a.id}));n>=0?(t[n].owners.push(e.owner),t[n].owners.sort()):t.push(function(e,t){var a={};return a.id=t.id,a.type=t.type,a.name=t.name,a.published=t.published,a.image=t.image,a.thumbnail=t.thumbnail,a.stats=t.stats,a.rating=function(e){return Math.round(10*e)/10}(t.rating),a.owners=[],a.owners.push(e),a}(e.owner,a))}))})),t.sort((function(e,t){return e.name>t.name?1:-1}))}var le=Object(u.a)({ownerList:{marginBottom:"1rem"}}),se=function(){var e=le(),t=Object(n.useState)([]),a=Object(m.a)(t,2),i=a[0],c=a[1],o=Object(n.useState)([]),u=Object(m.a)(o,2),f=u[0],g=u[1],p=Object(n.useState)([]),b=Object(m.a)(p,2),d=b[0],E=b[1];Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("owners"));e&&e.forEach((function(e){v(e)}))})),Object(n.useEffect)((function(){g(oe(i))}),[i]),Object(n.useEffect)((function(){localStorage.setItem("owners",JSON.stringify(d))}),[d]);var v=function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(h(e)){a.next=5;break}return a.next=3,l.a.awrap(ne(e));case 3:(t=a.sent).hasError?w(t.error):(c((function(e){return[].concat(Object(s.a)(e),[t])})),x(e)||E((function(t){return[].concat(Object(s.a)(t),[e])})));case 5:case"end":return a.stop()}}))},h=function(e){return i.some((function(t){return t.owner===e}))},x=function(e){return d.some((function(t){return t===e}))},w=function(e){return alert(e)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{container:!0,direction:"column",alignItems:"center"},r.a.createElement(A.a,{item:!0,xs:12},r.a.createElement(y,{addOwner:v})),r.a.createElement(A.a,{item:!0,xs:12,className:e.ownerList},r.a.createElement(Q,{owners:d,removeOwner:function(e){var t=d.filter((function(t){return t!==e}));localStorage.setItem("owners",JSON.stringify(t)),E(t),c(i.filter((function(t){return t.owner!==e})))}})),r.a.createElement(A.a,{item:!0,xs:12},r.a.createElement(ee,{collection:f}))),r.a.createElement(W,{masterCollection:f,setMasterCollection:g}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var me=a(157),ue=a(156),fe=a(80),ge=a(79),pe=a.n(ge),be=Object(fe.a)({palette:{primary:pe.a,secondary:{main:"#b71c1c"},type:"dark"}});c.a.render(r.a.createElement(ue.a,{theme:be},r.a.createElement(me.a,null,r.a.createElement(se,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},85:function(e,t,a){e.exports=a(114)}},[[85,1,2]]]);
//# sourceMappingURL=main.28570f8b.chunk.js.map